# 🤖 Telegram WebApp - Сервис заказа услуг

Современное веб-приложение для Telegram, позволяющее пользователям заказывать различные услуги прямо через Telegram бота.

## ✨ Возможности

- 📱 Нативная интеграция с Telegram WebApp
- 🎨 Адаптивный дизайн с поддержкой тем Telegram
- 🚀 Быстрый деплой в одну команду
- 🔄 Автоматическая обработка заказов через webhook
- ✅ CORS поддержка для кроссплатформенной работы
- 🔐 **Расширенная административная панель** с управлением админами
- 👑 **Система ролей** - администраторы и супер-администратор
- 📋 **Модульная архитектура** с переиспользуемыми компонентами

## 🚀 Быстрый старт

### 1. Автоматический деплой

```bash
./deploy.sh
```

### 2. Настройка после деплоя

```bash
# Настроить webhook
./setup-webhook.sh ВАШ_ТОКЕН_БОТА your-site.netlify.app

# Протестировать деплой
./test-deploy.sh your-site.netlify.app
```

### 3. Настроить переменные среды

В Netlify Dashboard добавьте:

- `BOT_TOKEN` - токен вашего Telegram бота

## 📚 Документация

- [📖 Подробная инструкция по деплою](DEPLOY_GUIDE.md)
- [⚡ Быстрый старт](QUICK_START.md)

## 🛠 Технологии

- **Frontend**: SvelteKit 5.0, TypeScript, SCSS
- **Backend**: Netlify Functions, Telegraf
- **Deploy**: Netlify, автоматические скрипты
- **API**: Telegram Bot API, WebApp API

## 🏗 Разработка

### Локальная разработка

```bash
npm install
npm run dev
```

### Сборка проекта

```bash
npm run build
```

### Доступные команды

```bash
npm run dev          # Разработка
npm run build        # Сборка
npm run preview      # Превью сборки
npm run deploy       # Полный деплой
npm run deploy:check # Проверка системы
npm run deploy:build # Только сборка
npm run deploy:test  # Тестирование
```

## 📁 Структура проекта

```
tma/
├── deploy.sh              # 🚀 Автоматический деплой
├── setup-webhook.sh       # 🔗 Настройка webhook
├── test-deploy.sh         # 🧪 Тестирование
├── ADMIN_GUIDE.md         # 📖 Руководство по админ-панели
├── netlify/
│   └── functions/
│       └── webhook.js     # 📡 Обработка заказов и API
├── src/
│   ├── routes/
│   │   ├── +page.svelte   # 📱 Главная страница
│   │   └── admin/
│   │       └── +page.svelte # 🔐 Административная панель
│   └── lib/
│       ├── telegram.ts    # 🤖 Telegram утилиты
│       └── components/    # 🧩 Переиспользуемые компоненты
│           ├── AdminLayout.svelte
│           ├── OrdersSection.svelte
│           └── AdminsSection.svelte
└── static/                # 📄 Статические файлы
```

## 🔐 Административная панель

### Доступ

- **URL:** `/admin`
- **Требования:** Права администратора
- **Функции:** Управление заказами и администраторами

### Возможности

- 📋 **Просмотр заказов** - полная информация о всех поступивших заказах
- 👥 **Управление админами** - добавление, редактирование, удаление
- 👑 **Супер-администратор** - защищенная роль с полными правами
- 📱 **Адаптивный интерфейс** - работает на всех устройствах

### Подробности

См. [ADMIN_GUIDE.md](ADMIN_GUIDE.md) для полного руководства по использованию.

## 🤝 Поддержка

Если возникли проблемы:

1. Проверьте [DEPLOY_GUIDE.md](DEPLOY_GUIDE.md) для вопросов развертывания
2. Изучите [ADMIN_GUIDE.md](ADMIN_GUIDE.md) для работы с админ-панелью
3. Запустите `./deploy.sh check`
4. Проверьте логи: `netlify logs:functions`
